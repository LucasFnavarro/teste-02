generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Professor {
  id           Int       @id @default(autoincrement())
  name         String
  departmentId Int
  titleId      Int
  subjects     Subject[] @relation("ProfSubjects")
}

model Subject {
  id          Int        @id @default(autoincrement())
  code        String
  name        String
  teacherId   Int?
  classes     Class[]
  professor   Professor? @relation("ProfSubjects", fields: [professorId], references: [id])
  professorId Int?
}

model Class {
  id        Int             @id @default(autoincrement())
  subjectId Int
  year      Int
  semester  Int
  code      String
  schedule  ClassSchedule[]
  Subject   Subject         @relation(fields: [subjectId], references: [id])
}

model ClassSchedule {
  id        Int    @id @default(autoincrement())
  classId   Int
  roomId    Int
  dayOfWeek String
  startTime String
  endTime   String
  Class     Class  @relation(fields: [classId], references: [id])
  Room      Room   @relation(fields: [roomId], references: [id])
}

model Room {
  id         Int             @id @default(autoincrement())
  buildingId Int
  name       String
  schedules  ClassSchedule[]
}
